<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane prefHeight="600" prefWidth="1024" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="edu.utsa.cs3443.questlog.ui.StatsController">

    <!-- ========================= LEFT: Summary Card ========================= -->
    <left>
        <VBox spacing="12">

            <!-- Summary Card Box -->
            <VBox fx:id="summaryCard" spacing="5.0">

                <Label style="-fx-font-size: 20px; -fx-font-weight: bold;" text="Overview" />

                <Separator />

                <GridPane hgap="10" vgap="10.0">
                    <columnConstraints>
                        <ColumnConstraints halignment="LEFT" minWidth="110" />
                        <ColumnConstraints halignment="LEFT" />
                    </columnConstraints>

                    <children>
                        <Label text="Total Games:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label fx:id="totalGamesLabel" text="0" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                        <Label text="Completed:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <Label fx:id="completedLabel" text="0" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                        <Label text="Playing:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <Label fx:id="playingLabel" text="0" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                        <Label text="Backlog:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                        <Label fx:id="backlogLabel" text="0" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                    </children>
               <rowConstraints>
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
               </rowConstraints>
                </GridPane>

            </VBox>
         <BorderPane.margin>
            <Insets bottom="10.0" left="30.0" top="25.0" />
         </BorderPane.margin>
        </VBox>
    </left>

    <!-- ========================= CENTER: Bar Chart ========================= -->
    <center>
        <StackPane>

            <children>
            <VBox>
               <children>
                      <BarChart fx:id="statusChart" animated="false" horizontalGridLinesVisible="false" horizontalZeroLineVisible="false" prefHeight="525.0" prefWidth="847.0" verticalGridLinesVisible="false" verticalZeroLineVisible="false">
                          <!-- FIX: Properly wired axes -->
                          <xAxis>
                              <CategoryAxis fx:id="xAxis" />
                          </xAxis>
                          <yAxis>
                              <NumberAxis fx:id="yAxis" />
                          </yAxis>
                      </BarChart>
                   <StackPane fx:id="legendWrapper" alignment="CENTER">
                       <HBox fx:id="customLegend" />
                   </StackPane>
               </children>
            </VBox>
            </children>
         <BorderPane.margin>
            <Insets right="20.0" />
         </BorderPane.margin>
         <padding>
            <Insets top="10.0" />
         </padding>
        </StackPane>
    </center>

    <!-- ========================= BOTTOM: Toolbar ========================= -->
    <bottom>
        <fx:include source="../components/toolbar.fxml" />
    </bottom>
   <top>
      <HBox BorderPane.alignment="CENTER">
         <children>
            <TextFlow fx:id="statsTitleFlow" HBox.hgrow="ALWAYS" />
         </children>
         <BorderPane.margin>
            <Insets left="30.0" right="30.0" top="20.0" />
         </BorderPane.margin>
      </HBox>
   </top>

</BorderPane>
